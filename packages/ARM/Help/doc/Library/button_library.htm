
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>

<title>Button library</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="Copyright" content="mikroElektronika 2005.">
<meta name="Author" content="Nikola Topalovic. mailto:office@mikroe.com">

<link rel="stylesheet" type="text/css" href="css/help_c_ARM.css">
<link rel="stylesheet" type="text/css" href="css/example.css">
<script defer type="text/javascript" src="css/pngfix.js"></script>
<script type="text/javascript" src="css/tabber.js"></script>


	








<style type="text/css">
#top {
  background:transparent url(template/c_arm.png); 
}

.title{
	PADDING-RIGHT: 2px; 
	PADDING-LEFT: 70px; 
	FONT-WEIGHT: bold; 
	FONT-SIZE: 14px; 
	PADDING-BOTTOM: 3px; 
	PADDING-TOP: 0px; 
	FONT-FAMILY: Verdana;
  color:white;
}

.navigation{
  PADDING-TOP: -5px;
	PADDING-RIGHT: 2px; 
	PADDING-LEFT: 63px; 
	FONT-SIZE: 11px; 
	FONT-FAMILY: Verdana;
  color:white;
}

.navigation a:link {text-decoration: none; color: white;}
.navigation a:visited {text-decoration: none; color: white;}
.navigation a:active {text-decoration: none; color: white;}
.navigation a:hover {text-decoration: none; color: white; background:black;}

.nav_bar {
}

#top td p,td pre {
	margin:0 0 0 0;
}
</style>

<style type="text/css" media="screen">
#main{
	border-top: 1px solid #000000;
  padding-left: 15px;
  padding-right: 15px;
	position: absolute;
	top: 59px;
	right: 0px;
	bottom: 0px;
	left: 0px;

	width: expression(document.body.offsetWidth - 3);
	height: expression(document.body.offsetHeight -  65);
	overflow: auto;
}
</style>

</head>


<body>

<div id="top">
<table height="60" width="100%">
  <tbody>
	  <tr>
		  <td>
			  <pre class="nav_bar"><div class="title">Button library</div><div class="navigation">&nbsp;&nbsp;<A href="mikroc_libraries.htm">mikroC PRO for ARM Libraries</A> &gt; <A href="mikroC_miscellaneous_libraries.htm">Miscellaneous Libraries</A> &gt; </div></pre>
			</td>
		  <td style="WIDTH: 120px" align="right">
			  <pre class="nav_bar"><A href="mikroC_miscellaneous_libraries.htm" title="Previous"><img src="template\btn_prev_n.png" border="0"></a>&nbsp;<A title="Top of the Page" href="#top_of_page" alt="Top of the Page"><IMG src="template/btn_up_n.png" border=0 ></a>&nbsp;<A href="conversions_library.htm" title="Next"><img src="template\btn_next_n.png" border="0"></a></pre>
			</td>
		</tr>
	</tbody>
</table>
</div>

	


  <div id="main">


    <a name="top_of_page"><h2>Button Library</h2></a>

    <p>The Button Library provides routines for detecting button presses and debouncing (eliminating the influence of contact flickering upon pressing a button).</p>

    <!-- -->

    <h3>Library Routines</h3>

    <ul>
      <li><a href="#button">Button</a></li>
    </ul>


    <!-- -->


    <h3 id="button">Button</h3>


    <!-- tabela: Button -->

    <table class="routine" width="100%">

      <!--
      <caption></caption>

      <thead></thead>
      -->

      <tbody>

        <tr style="background:'white'" onmouseover="this.style.background='#f8f8f8';" onmouseout="this.style.background='white';">
          <th width="0" valign="top">Prototype</th>
          <td class="code" width="100%" valign="top">
            <p><b>unsigned int</b> Button(<b>unsigned int</b> *port, <b>unsigned int</b> pin, <b>unsigned int</b> time, <b>unsigned int</b> active_state);</p>
          </td>
        </tr>

        <tr style="background:'white'" onmouseover="this.style.background='#f8f8f8';" onmouseout="this.style.background='white';">
          <th valign="top">Description</th>
          <td valign="top">
            <p>The function eliminates the influence of contact flickering upon pressing a button (debouncing). 
						   The Button pin is tested just after the function call and then again after the debouncing period has expired. 
							 If the pin was in the active state in both cases then the function returns 255 (true).</p>
          </td>
        </tr>

        <tr style="background:'white'" onmouseover="this.style.background='#f8f8f8';" onmouseout="this.style.background='white';">
          <th valign="top">Parameters</th>
          <td valign="top">
           	<ul>
           		<li><code>port:</code> button port address</li>
           		<li><code>pin:</code> button pin</li>
           		<li><code>time:</code> debouncing period in milliseconds</li>
           		<li><code>active_state:</code> determines what is considered as active state. Valid values: <code>0</code> (logical zero) and <code>1</code> (logical one)</li>
           	</ul>
          </td>
        </tr>

        <tr style="background:'white'" onmouseover="this.style.background='#f8f8f8';" onmouseout="this.style.background='white';">
          <th valign="top">Returns</th>
          <td valign="top">
           	<ul>
           		<li><code>255</code> if the pin was in the active state for given period.</li>
           		<li><code>0</code> otherwise</li>
           	</ul>
          </td>
        </tr>

        <tr style="background:'white'" onmouseover="this.style.background='#f8f8f8';" onmouseout="this.style.background='white';">
          <th valign="top">Requires</th>
          <td valign="top">
            <p>Nothing.</p>
          </td>
        </tr>

        <tr style="background:'white'" onmouseover="this.style.background='#f8f8f8';" onmouseout="this.style.background='white';">
          <th valign="top">Example</th>
          <td valign="top">
  <div class="tabber">
    <div class="tabbertab">
    <h2>Stellaris</h2>
<pre>
<b>unsigned int</b> oldstate;

<b>void</b> main() {

  GPIO_Digital_Input(&#38;GPIO_PORTE_DATA_BITS, _GPIO_PINMASK_1);    <i>// Set PE1 as digital input</i>
  GPIO_Digital_Output(&#38;GPIO_PORTF_DATA_BITS, _GPIO_PINMASK_ALL); <i>// Set GPIO_PORTF as digital output</i>
  oldstate = 0;
  
  <b>do</b> {
    <b>if</b> (Button(&#38;GPIO_PORTE_DATA, 1, 1, 1))                      <i>// detect logical one on PE1 pin</i>
      oldstate = 1;
    <b>if</b> (oldstate &#38;&#38; Button(&#38;GPIO_PORTE_DATA, 1, 1, 0)) {        <i>// detect one-to-zero transition on PE1 pin</i>
      GPIO_PORTF_DATA = ~GPIO_PORTF_DATA;                       <i>// invert GPIO_PORTF value</i>
      oldstate = 0;
    }
  } <b>while</b>(1);                                                   <i>// endless loop</i>
}
</pre>
    </div>
    <div class="tabbertab">
    <h2>STM32</h2>
<pre>
<b>unsigned int</b> oldstate;

<b>void</b> main() {

  GPIO_Digital_Input(&#38;GPIOA_IDR, _GPIO_PINMASK_0);         <i>// Set PA0 as digital input</i>
  GPIO_Digital_Output(&#38;GPIOD_ODR, _GPIO_PINMASK_ALL);      <i>// Set PORTD as digital output</i>
  oldstate = 0;
  
  <b>do</b> {
    <b>if</b> (Button(&#38;GPIOA_IDR, 0, 1, 1))                      <i>// detect logical one on PA0 pin</i>
      oldstate = 1;
    <b>if</b> (oldstate &#38;&#38; Button(&#38;GPIOA_IDR, 0, 1, 0)) {        <i>// detect one-to-zero transition on PA0 pin</i>
      GPIOD_ODR = ~GPIOD_ODR;                             <i>// invert PORTD value</i>
      oldstate = 0;
    }
  } <b>while</b>(1);                                             <i>// endless loop</i>
}
</pre>
    </div>
  </div>


          </td>
        </tr>

        <tr style="background:'white'" onmouseover="this.style.background='#f8f8f8';" onmouseout="this.style.background='white';">
          <th valign="top">Notes</th>
          <td valign="top">
            <p>None.</p>
          </td>
        </tr>

      </tbody>

    </table>

    <!-- kraj tabele -->

    <div class="feedback">
            Copyright (c) 2002-2019 mikroElektronika. All rights reserved.
      <br>What do you think about this topic ?  <a href="https://helpdesk.mikroe.com/conversation/new/3" target="_blank">Send us feedback!</a>
    </div>

      <div class="libstock">Want more examples and libraries?&nbsp;
     <br>Find them on
     <a href="http://www.libstock.com/" target="_blank"><img alt="LibStock - A place for the code" src="img/libstock.gif" border="0" align="absmiddle"></a>
    </div>

  </div><!--/main-->




</body>

</html>
